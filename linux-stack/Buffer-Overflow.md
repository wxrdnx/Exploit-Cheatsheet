# Buffer overflow

- Scenario:
    - When program writes more bytes to a buffer than the number of bytes requested, changing adjacent memory values.

## Vunerable Program

```c
#include <stdio.h>
int main(int argc, char **argv)
{
    char buf[8];
    gets(buf);
    printf("%s\n", buf);
    return 0;
}
```
- `gets` can read data of any length. As a result, more than 8 bytes of data can be intentionally store on the buffer.

## Dangerous C functions

- `gets`
    - Mitigation: `fgets`
- `scanf("%s")`, `fscanf("%s)`, `sscanf("%s")`, ...
    - Mitigation: `scanf("%80s")`, `read`, `fgets`, ...
- `strcpy`
    - Mitigation: `strncpy`
- `strcat`
    - Mitigation: `strncat`
- `sprintf`
    - Mitigation: `snprintf`
- `getcwd`, `getwd`
- `realpath`

## Exploitation Techniques

### Executable Stack

See [Shellcode](#Shellcode).

### Non-executable Stack

See [Ret2win](#return-to-win-ret2win), [Ret2libc](#Return-to-libc-ret2libc), and [ROP](#Return-Oriented-Programming-ROP).
